dotnet tool install --global dotnet-ef
 
 Draaien in root van serv, dit is schijt


dotnet-ef dbcontext scaffold "server=127.0.0.1;Port=3306;Database=PropositionVoter;user id=root;Pwd=;SslMode=none;" MySql.Data.EntityFrameworkCore -o C:\Users\OLE\source\repos\BlazorAppMysql\BlazorAppMysql\Shared\DBModels --force --data-annotations

SET FOREIGN_KEY_CHECKS = 0; 
TRUNCATE table propositionvoter.proposition;
SET FOREIGN_KEY_CHECKS = 1;

CREATE TABLE `dossier` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Title` varchar(145) NOT NULL,
  `CreationDate` datetime NOT NULL,
  `UserID` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID_UNIQUE` (`ID`),
  UNIQUE KEY `Name_UNIQUE` (`Title`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;


CREATE TABLE `vote` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `CreationDate` datetime NOT NULL,
  `Title` varchar(45) NOT NULL,
  `Content` varchar(500) NOT NULL,
  `CreatedByUserID` int(11) NOT NULL,
  `ClosedDate` datetime DEFAULT NULL,
  `DossierID` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID_UNIQUE` (`ID`),
  KEY `fk_vote_dossier_idx` (`DossierID`),
  CONSTRAINT `fk_vote_dossier` FOREIGN KEY (`DossierID`) REFERENCES `dossier` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE `discussion` (
  `ID` int(11) NOT NULL,
  `UserID` varchar(45) NOT NULL,
  `Content` varchar(250) NOT NULL,
  `PropositionID` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `fk_Discussion_Proposition_idx` (`PropositionID`),
  CONSTRAINT `fk_Discussion_Proposition` FOREIGN KEY (`PropositionID`) REFERENCES `vote` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE `user_vote` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `VoteID` int(11) NOT NULL,
  `VotedFor` tinyint(4) NOT NULL,
  `VoteDate` datetime NOT NULL,
  `Comment` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `idUser_Voted_UNIQUE` (`ID`),
  KEY `fk_User_Proposition_Proposition_idx` (`VoteID`),
  CONSTRAINT `fk_User_Proposition_Proposition` FOREIGN KEY (`VoteID`) REFERENCES `vote` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


-- Ik heb UserCode van 200 naar 180 gekrompen
CREATE TABLE `DeviceCodes` (
          `UserCode` varchar(180) CHARACTER SET utf8mb4 NOT NULL,
          `DeviceCode` varchar(180) CHARACTER SET utf8mb4 NOT NULL,
          `SubjectId` varchar(200) CHARACTER SET utf8mb4 NULL,
          `ClientId` varchar(200) CHARACTER SET utf8mb4 NOT NULL,
          `CreationTime` datetime(6) NOT NULL,
          `Expiration` datetime(6) NOT NULL,
          `Data` longtext CHARACTER SET utf8mb4 NOT NULL,
          CONSTRAINT `PK_DeviceCodes` PRIMARY KEY (`UserCode`)
      );
-- Ik heb Key van 200 naar 190 gekrompen
            CREATE TABLE `PersistedGrants` (
          `Key` varchar(190) CHARACTER SET utf8mb4 NOT NULL,
          `Type` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
          `SubjectId` varchar(200) CHARACTER SET utf8mb4 NULL,
          `ClientId` varchar(200) CHARACTER SET utf8mb4 NOT NULL,
          `CreationTime` datetime(6) NOT NULL,
          `Expiration` datetime(6) NULL,
          `Data` longtext CHARACTER SET utf8mb4 NOT NULL,
          CONSTRAINT `PK_PersistedGrants` PRIMARY KEY (`Key`)
      );

     --  `RoleId` varchar(85)
      CREATE TABLE `AspNetRoleClaims` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RoleId` varchar(85) CHARACTER SET utf8mb4 NOT NULL,
    `ClaimType` longtext CHARACTER SET utf8mb4 NULL,
    `ClaimValue` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetRoleClaims` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_AspNetRoleClaims_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE
);


CREATE TABLE `AspNetUserLogins` (
    `LoginProvider` varchar(128) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderKey` varchar(128) CHARACTER SET utf8mb4 NOT NULL,
    `ProviderDisplayName` longtext CHARACTER SET utf8mb4 NULL,
    `UserId` varchar(85) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserLogins` PRIMARY KEY (`LoginProvider`, `ProviderKey`),
    CONSTRAINT `FK_AspNetUserLogins_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
);


CREATE TABLE `AspNetUserRoles` (
    `UserId` varchar(85) CHARACTER SET utf8mb4 NOT NULL,
    `RoleId` varchar(85) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_AspNetUserRoles` PRIMARY KEY (`UserId`, `RoleId`),
    CONSTRAINT `FK_AspNetUserRoles_AspNetRoles_RoleId` FOREIGN KEY (`RoleId`) REFERENCES `AspNetRoles` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_AspNetUserRoles_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
);
    

    CREATE TABLE `AspNetUserTokens` (
    `UserId` varchar(85) CHARACTER SET utf8mb4 NOT NULL,
    `LoginProvider` varchar(128) CHARACTER SET utf8mb4 NOT NULL,
    `Name` varchar(128) CHARACTER SET utf8mb4 NOT NULL,
    `Value` longtext CHARACTER SET utf8mb4 NULL,
    CONSTRAINT `PK_AspNetUserTokens` PRIMARY KEY (`UserId`, `LoginProvider`, `Name`),
    CONSTRAINT `FK_AspNetUserTokens_AspNetUsers_UserId` FOREIGN KEY (`UserId`) REFERENCES `AspNetUsers` (`Id`) ON DELETE CASCADE
);